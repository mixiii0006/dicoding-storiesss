mas;const CACHE_NAME="dicoding-stories-cache-v2",DATA_CACHE_NAME="dicoding-stories-data-cache-v2",FILES_TO_CACHE=["/","/index.html","/favicon.png","/manifest.json","/styles/styles.css","/scripts/index.js","/scripts/pages/app.js","/scripts/pages/home/home-page.js","/scripts/pages/home/home-presenter.js","/scripts/routes/routes.js","/scripts/routes/url-parser.js","/scripts/data/api.js","/scripts/config.js","https://fonts.googleapis.com/css2?family=Open+Sans&display=swap","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css","https://unpkg.com/leaflet/dist/leaflet.css","https://unpkg.com/leaflet/dist/leaflet.js"];self.addEventListener("install",(e=>{e.waitUntil(caches.open(CACHE_NAME).then((e=>(console.log("Pre-caching offline resources"),e.addAll(FILES_TO_CACHE))))),self.skipWaiting()})),self.addEventListener("activate",(e=>{e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{if(e!==CACHE_NAME&&e!==DATA_CACHE_NAME)return console.log("Removing old cache",e),caches.delete(e)})))))),self.clients.claim()})),self.addEventListener("fetch",(e=>{e.request.url.includes("/stories")?e.respondWith(caches.open(DATA_CACHE_NAME).then((s=>fetch(e.request).then((t=>(200===t.status&&s.put(e.request.url,t.clone()),t))).catch((()=>s.match(e.request)))))):e.respondWith(caches.match(e.request).then((s=>s||fetch(e.request))))})),self.addEventListener("push",(e=>{let s={};e.data&&(s=e.data.json());const t=s.title||"Dicoding Stories",i={body:s.body||"You have a new notification.",icon:"/favicon.png",badge:"/favicon.png",data:s.url||"/"};e.waitUntil(self.registration.showNotification(t,i))})),self.addEventListener("notificationclick",(e=>{e.notification.close(),e.waitUntil(clients.matchAll({type:"window"}).then((s=>{for(const t of s)if(t.url===e.notification.data&&"focus"in t)return t.focus();if(clients.openWindow)return clients.openWindow(e.notification.data)})))}));